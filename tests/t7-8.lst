Turbo Assembler	 Version 4.1	    01/12/24 17:14:45	    Page 1
lab1.asm
Lab1


      1
      2	0000			     .model    small
      3				     .186
      4
      5	      =-0080		     MIN	    EQU	   -128
      6	      =007F		     MAX	    EQU	   127
      7
      8	0000			     .data
      9	0000  41 5F 42 5F 43 2E	54+	 path	    db	  'A_B_C.TXT', 0
     10	      58 54 00
     11	000A  30 30 30 30 5F 30	30+	 buffer	    db	  "0000_0000_0000", 0dh, 0ah
     12	      30 30 5F 30 30 30	30+
     13	      0D 0A
     14	001A			     .data?
     15	0000  ??			 a	    db	  ?
     16	0001  ??			 c	    db	  ?
     17	0002  ??			 b	    db	  ?
     18	0003  ????			 d	    dw	  ?
     19	0005			     .code
     20	0000			     Start:
     21	0000  B8 0000s			 mov	ax,    @data
     22	0003  8E D8			 mov	ds,    ax
     23	0005  8E C0			 mov	es,    ax
     24	0007  BE 0000r			 mov	si,    offset a
     25	000A  AD			 lodsw
     26	000B  0B C0			 or	ax,    ax
     27	000D  75 17			 jnz	get_val
     28	000F			     mkFile:
     29	000F  BA 0000r			 mov	dx,    offset path
     30	0012  B4 3C			 mov	ah,    03Ch
     31	0014  33 C9			 xor	cx,    cx
     32	0016  CD 21			 int	21h
     33	0018			     init:
     34	0018  BF 0016r			 lea	di,    [buffer + 12]
     35	001B  FD			 std
     36	001C  B4 80			 mov	ah,    MIN
     37	001E  8B F0			 mov	si,    ax
     38	0020  8A C4			 mov	al,    ah
     39	0022  8B D8			 mov	bx,    ax
     40	0024  EB 0D			 jmp	SHORT calc
     41	0026			     get_val:
     42	0026  8A C8			 mov	cl,    al
     43	0028  AC			 lodsb
     44	0029  8B FE			 mov	di,    si
     45	002B  8A E8			 mov	ch,    al
     46	002D  32 C0			 xor	al,    al
     47	002F  8B F0			 mov	si,    ax
     48	0031  8B D9			 mov	bx,    cx
     49					 ; EQUATION    d = a + 12*b*c +6 / 65*c	+ 7*a^2
     50	0033			     calc:
     51	0033  8A C3			 mov	al,    bl
     52	0035  98			 cbw
     53	0036  8B E8			 mov	bp,    ax
     54	0038  C1 E0 03			 sal	ax,    3
     55	003B  2B C5			 sub	ax,    bp
     56	003D  F7 ED			 imul	bp
     57	003F  0B D2			 or	dx,    dx
Turbo Assembler	 Version 4.1	    01/12/24 17:14:45	    Page 2
lab1.asm
Lab1


     58	0041  75 29			 jnz	wrBuffer
     59	0043  8B D0			 mov	dx,    ax
     60	0045  8B C6			 mov	ax,    si
     61	0047  8A C4			 mov	al,    ah
     62	0049  98			 cbw
     63	004A  8B C8			 mov	cx,    ax
     64	004C  C1 E0 06			 sal	ax,    6
     65	004F  03 C8			 add	cx,    ax
     66	0051  78 08			 js	negative
     67	0053  03 D1			 add	dx,    cx
     68	0055  78 15			 js	wrBuffer
     69	0057  72 13			 jc	wrBuffer
     70	0059  EB 08			 jmp	SHORT check_loop
     71	005B			     negative:
     72	005B  F7 D9			 neg	cx
     73	005D  2B D1			 sub	dx,    cx
     74	005F  72 02			 jc	check_loop
     75	0061  78 09			 js	wrBuffer
     76	0063			     check_loop:
     77	0063  F7 C6 00FF		 test	si,    00FFh
     78	0067  75 7E			 jnz	loop_iter
     79	0069  E9 00A7			 jmp	numerator
     80	006C			     wrBuffer:
     81	006C  8B EF			 mov	bp,    di
     82	006E  B1 20			 mov	cl,    20h
     83	0070  8B C6			 mov	ax,    si
     84	0072  8A C4			 mov	al,    ah
     85	0074  A8 80			 test	al,    080h
     86	0076  79 04			 jns	posC
     87	0078  F6 D8			 neg	al
     88	007A  B1 2D			 mov	cl,    2dh
     89	007C			     posC:
     90	007C  D4 0A			 aam
     91	007E  8A E8			 mov	ch,    al
     92	0080  8A C4			 mov	al,    ah
     93	0082  D4 0A			 aam
     94	0084  86 EC			 xchg	ch,    ah
     95	0086  0D 3030			 or	ax,    3030h
     96	0089  AB			 stosw
     97	008A  8B C1			 mov	ax,    cx
     98	008C  80 CC 30			 or	ah,    30h
     99	008F  AB			 stosw
    100	0090  4F			 dec	di
    101	0091  8A C7			 mov	al,    bh
    102	0093  B1 20			 mov	cl,    20h
    103	0095  A8 80			 test	al,    080h
    104	0097  79 04			 jns	posB
    105	0099  F6 D8			 neg	al
    106	009B  B1 2D			 mov	cl,    2dh
    107	009D			     posB:
    108	009D  D4 0A			 aam
    109	009F  8A E8			 mov	ch,    al
    110	00A1  8A C4			 mov	al,    ah
    111	00A3  D4 0A			 aam
    112	00A5  86 EC			 xchg	ch,    ah
    113	00A7  0D 3030			 or	ax,    3030h
    114	00AA  AB			 stosw
Turbo Assembler	 Version 4.1	    01/12/24 17:14:45	    Page 3
lab1.asm
Lab1


    115	00AB  8B C1			 mov	ax,    cx
    116	00AD  80 CC 30			 or	ah,    30h
    117	00B0  AB			 stosw
    118	00B1  4F			 dec	di
    119	00B2  8A C3			 mov	al,    bl
    120	00B4  B1 20			 mov	cl,    20h
    121	00B6  A8 80			 test	al,    080h
    122	00B8  79 04			 jns	posA
    123	00BA  F6 D8			 neg	al
    124	00BC  B1 2D			 mov	cl,    2dh
    125	00BE			     posA:
    126	00BE  D4 0A			 aam
    127	00C0  8A E8			 mov	ch,    al
    128	00C2  8A C4			 mov	al,    ah
    129	00C4  D4 0A			 aam
    130	00C6  86 EC			 xchg	ch,    ah
    131	00C8  0D 3030			 or	ax,    3030h
    132	00CB  AB			 stosw
    133	00CC  8B C1			 mov	ax,    cx
    134	00CE  80 CC 30			 or	ah,    30h
    135	00D1  AB			 stosw
    136	00D2  47			 inc	di
    137	00D3  47			 inc	di
    138	00D4			     wrFile:
    139	00D4  8B D7			 mov	dx,    di
    140	00D6  8B FD			 mov	di,    bp
    141	00D8  B9 0010			 mov	cx,    16
    142	00DB  B4 40			 mov	ah,    40h
    143	00DD  8B EB			 mov	bp,    bx
    144	00DF  8B DE			 mov	bx,    si
    145	00E1  32 FF			 xor	bh,    bh
    146	00E3  CD 21			 int	21h
    147	00E5  8B DD			 mov	bx,    bp
    148	00E7			     loop_iter:
    149	00E7  8B C6			 mov	ax,    si
    150	00E9  80 FC 7F			 cmp	ah,    MAX
    151	00EC  7C 14			 jl	c_iter
    152	00EE  80 FF 7F			 cmp	bh,    MAX
    153	00F1  7C 09			 jl	b_iter
    154	00F3  80 FB 7F			 cmp	bl,    MAX
    155	00F6  7D 11			 jnl	clFile
    156	00F8			     a_iter:
    157	00F8  FE C3			 inc	bl
    158	00FA  B7 7F			 mov	bh,    MIN-1
    159	00FC			     b_iter:
    160	00FC  B4 7F			 mov	ah,    MIN-1
    161	00FE  8B F0			 mov	si,    ax
    162	0100  FE C7			 inc	bh
    163	0102			     c_iter:
    164	0102  81 C6 0100		 add	si,    0100h
    165	0106			     not_max:
    166	0106  E9 FF2A			 jmp	calc
    167	0109			     clFile:
    168	0109  B4 3E			 mov	ah,    3Eh
    169	010B  8B DE			 mov	bx,    si
    170	010D  32 FF			 xor	bh,    bh
    171	010F  CD 21			 int	21h
Turbo Assembler	 Version 4.1	    01/12/24 17:14:45	    Page 4
lab1.asm
Lab1


    172	0111  EB 2B			 jmp	SHORT Exit
    173	0113			     numerator:
    174	0113  8B CA			 mov	cx,    dx
    175	0115  8A C7			 mov	al,    bh
    176	0117  98			 cbw
    177	0118  8B D0			 mov	dx,    ax
    178	011A  D1 E2			 sal	dx,    1
    179	011C  03 D0			 add	dx,    ax
    180	011E  C1 E2 02			 sal	dx,    2
    181	0121  8B C6			 mov	ax,    si
    182	0123  8A C4			 mov	al,    ah
    183	0125  98			 cbw
    184	0126  F7 EA			 imul	dx
    185	0128  83 C5 06			 add	bp,    6
    186	012B  78 07			 js	neg_bx
    187	012D  03 C5			 add	ax,    bp
    188	012F  83 D2 00			 adc	dx,    0
    189	0132  EB 07			 jmp	SHORT division
    190	0134			     neg_bx:
    191	0134  F7 DB			 neg	bx
    192	0136  2B C3			 sub	ax,    bx
    193	0138  83 DA 00			 sbb	dx,    0
    194	013B			     division:
    195	013B  F7 F9			 idiv	cx
    196	013D  AB			 stosw
    197	013E			     Exit:
    198	013E  B4 4C			 mov	ah,    04Ch
    199	0140  B0 00			 mov	al,    0
    200	0142  CD 21			 int	21h
    201					 End	Start
Turbo Assembler	 Version 4.1	    01/12/24 17:14:45	    Page 5
Symbol Table
Lab1



Symbol Name			  Type	 Value

??DATE				  Text	 "01/12/24"
??FILENAME			  Text	 "lab1	  "
??TIME				  Text	 "17:14:45"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 _TEXT
@CODESIZE			  Text	 0
@CPU				  Text	 0103H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 LAB1
@INTERFACE			  Text	 000H
@MODEL				  Text	 2
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
A				  Byte	 DGROUP:0000
A_ITER				  Near	 _TEXT:00F8
B				  Byte	 DGROUP:0002
BUFFER				  Byte	 DGROUP:000A
B_ITER				  Near	 _TEXT:00FC
C				  Byte	 DGROUP:0001
CALC				  Near	 _TEXT:0033
CHECK_LOOP			  Near	 _TEXT:0063
CLFILE				  Near	 _TEXT:0109
C_ITER				  Near	 _TEXT:0102
D				  Word	 DGROUP:0003
DIVISION			  Near	 _TEXT:013B
EXIT				  Near	 _TEXT:013E
GET_VAL				  Near	 _TEXT:0026
INIT				  Near	 _TEXT:0018
LOOP_ITER			  Near	 _TEXT:00E7
MAX				  Number 007F
MIN				  Number -0080
MKFILE				  Near	 _TEXT:000F
NEGATIVE			  Near	 _TEXT:005B
NEG_BX				  Near	 _TEXT:0134
NOT_MAX				  Near	 _TEXT:0106
NUMERATOR			  Near	 _TEXT:0113
PATH				  Byte	 DGROUP:0000
POSA				  Near	 _TEXT:00BE
POSB				  Near	 _TEXT:009D
POSC				  Near	 _TEXT:007C
START				  Near	 _TEXT:0000
WRBUFFER			  Near	 _TEXT:006C
WRFILE				  Near	 _TEXT:00D4

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _BSS				  16  0005 Word	  Public  BSS
  _DATA				  16  001A Word	  Public  DATA
_TEXT				  16  0144 Word	  Public  CODE

